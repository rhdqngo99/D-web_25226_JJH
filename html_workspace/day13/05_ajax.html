<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax</title>
</head>
<body>
    <h1>
        비동기 통신(asynchronous communication) : ajax
    </h1>
    <ul>
        <li>
            데이터 통신 방식 : 동기, 비동기
        </li>
        <li>
            동기방식(synchronous)
            동시에 일어나는 요청을 하면 바로 응답을 받는 방식
            순서적임.
            요청을 하면 Html 페이지로 리턴
            <form>동기방식</form>
        </li>
        <li>
            비동기방식(asynchronous)
            동시에 일어나지 않는 요청
            그자리에서 결과가 바로 주어지지않을 수도 있음. 
            순서적이지 않다.
        </li>
        <li>
            동기와 비동기의 장단점
        </li>
        <li>
            동기방식 : 직관적, 설계가 간단하다.
            결과가 주어지기 전까지는 아무것도 못하고 대기해야 하는 단점이 있음.
        </li>
        <li>
            비동기방식 : 설계가 복잡함
            결과가 주어지는데 시간이 걸려도, 다른작업을 할 수 있음 효율적임.
        </li>
        <li>
            비동기방식 : ajax jquery  $.ajax()
        </li>
        <li>
            async await : 비동기 통신 키워드 사용
            promise객체를 이용하여 데이터 통신을 편리하게 할 수 있도록 제공하는 키워드
        </li>
        <li>
            async 키워드 : 함수 선언 앞에 붙이는 키워드 (async function(){})
            그 함수의 리턴 객체는 promise 로 리턴됨
        </li>
        <li>
            await 키워드 : 순차처리가 되어야 할 때 사용
            순차 코드 실행시 지연로딩, 지연 실행 상황이 발생하면
            코드를 순차 진행할 수 있도록 보증하는 키워드
        </li>
        <li>
            http://jsonplaceholder.typicode.com/
        </li>
    </ul>
    <h3>async await 키워드 연습</h3>
    <button type="button" id="btn">데이터 불러오기</button>
    <ul id="ul">
    </ul>
    <script>
        document.getElementById('btn').addEventListener('click',()=>{
            asyncFunc().then(result => printData(result));
            
        });

        function printData(obj){
            let ul = document.getElementById('ul');
            for(const key in obj){
                ul.innerHTML+= `<li>${key}:${obj[key]}</li>`;
            }
        }

        async function asyncFunc() {
            try {
                const resp = await fetch('https://jsonplaceholder.typicode.com/todos/1');
                console.log(resp);
                //Promise객체  Response(응답객체) / Request(요청객체)
                const result = await resp.json(); //body에 싣어준 값을 json() 형태로 리턴
                console.log(result);
                return result;
            } catch (error) {
                console.log(error);
            }
        }
    </script>
</body>
</html>